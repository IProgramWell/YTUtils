// ==UserScript==
// @name        YT Utils
// @namespace   Violentmonkey Scripts
// @match       https://www.youtube.com/**
// @grant       GM_info
// @grant       GM_openInTab
// @version     1.6.6
// @author      -
// @inject-into page
// @run-at      document-start
// @description Useful YouTube utilities.
// @homepageURL https://github.com/IProgramWell/YTUtils
// @downloadURL https://raw.githubusercontent.com/IProgramWell/YTUtils/master/dist/YTUtils.user.js
// ==/UserScript==
(()=>{"use strict";var t={913:(t,e,n)=>{var i;Object.defineProperty(e,"t",{value:!0}),e.i=e.o=e.u=void 0;const o=n(583);e.u=new o.l({h:!0,target:null!==(i=document.body)&&void 0!==i?i:document}),e.o=["yt-navigate-start"],e.i={"ytutils-no-pl-btn":"{\n\tfloat: left;\n\ttop: 50%;\n\twhite-space: nowrap;\n}"}},607:function(t,e,n){var i=this&&this.v||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(e,"t",{value:!0});const o=n(127),u=n(583),l=i(n(815)),s=n(913);!function(){const t=(0,l.default)({m:{O:s.u,g:u.j,p:u.M}});for(let e of["init","onDocumentStart"])o.T._({L:t,S:e,N:!1});for(let e of s.o)globalThis.document.addEventListener(e,(function(n){o.T.$({L:t,methodName:e,methodArgs:[n],N:!0})}));globalThis.addEventListener("load",(function(){globalThis.document.head.appendChild(u.j.createElement("style",{innerHTML:Object.entries(s.i).map((([t,e])=>`.${t} ${e}`)).join("\n").trim(),id:"ytutils-styles"})),o.T._({L:t,S:"onDocumentLoad"})})),globalThis.addEventListener("yt-navigate-finish",(function(){const e=u.M.U();u.R.C.print(`Changed url! New url: "${e.href}"`),o.T.A({L:t,D:u.R.C,P:e})}))}()},815:function(t,e,n){var i=this&&this.k||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.t:o.writable||o.H)||(o={I:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.B||(Object.create?function(t,e){Object.defineProperty(t,"default",{I:!0,value:e})}:function(t,e){t.default=e}),u=this&&this.X||function(t){if(t&&t.t)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e};Object.defineProperty(e,"t",{value:!0});const l=n(127),s=u(n(566)),r=u(n(105)),c=u(n(138));e.default=function(t){return[new l.q({F:{V:s.W,Y:s.W},G:{"yt-navigate-start":s.J},K:l.T.Z(/^\/shorts\/.+$/i),m:t.m,tt:"No Shorts Redirector"}),new l.q({F:{et:r.nt,V:r.nt,it:r.ot},K:r.ut,m:t.m,tt:"No Playlist Controls"}),new l.q({F:{V:c.lt,it:c.st},K:l.T.Z(/^\/watch\/?$/),tt:"Search by title",m:t.m}),new l.q({F:{V(){var t;return!!(null===(t=null==this?void 0:this.m)||void 0===t?void 0:t.O)&&(this.m.O.rt("div#masthead-ad",(function(t){for(let e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e])})),!0)}},m:t.m,K:l.T.Z(/^\/?$/),tt:"No banner ad"})]}},105:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.ut=e.ot=e.nt=void 0;const n={ct:"ytutils-noplaylist-newtabcheckbox",ht:"ytutils-noplaylist-newtabcheckbox-label",dt:"ytutils-noplaylist-noplbtn"};e.nt=function(){const{p:t,g:e}=this.m,i=e.vt(".ytp-right-controls");if(!i)return!1;const o=e.createElement("input",{type:"checkbox",id:n.ct,style:"transform: translateY(50%)",className:"ytutils-no-pl-btn",name:n.ct,title:"Open in new tab"}),u=e.createElement("label",{htmlFor:n.ct,innerHTML:"New tab?",className:"ytutils-no-pl-btn",id:n.ht}),l=e.createElement("button",{id:n.dt,title:"Watch outside playlist",onclick(){var i;let o=e.ft();(null===(i=e.vt(`#${n.ct}`))||void 0===i?void 0:i.checked)?t.bt(`https://youtube.com/watch?v=${o.get("v")}`):t.Ot("search",`?v=${o.get("v")}`)},innerHTML:"No Playlist",className:"ytutils-no-pl-btn"});return i.prepend(o,u,l),!0},e.ot=function(){for(let t of Object.values(n))this.m.g.gt(t);return!1},e.ut=function(t){const e=t?"string"==typeof t?new URL(t):t:this.m.p.U();return/\/watch\/?/i.test(e.pathname)&&!!this.m.g.ft(e).get("list")}},566:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.J=e.W=void 0,e.W=function(){const[t,e,n]=this.m.p.U().pathname.split("/");return"shorts"===e&&this.m.p.navigate(`https://youtube.com/watch?v=${n}`),!0},e.J=function(t){"shorts"===t.detail.pageType&&this.m.p.navigate(`https://youtube.com/watch?v=${this.m.p.U().pathname.split("/")[2]}`)}},138:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.st=e.lt=void 0;const n={jt:"ytutils-searchbytitle-searchbtn"};e.lt=function(){var t;const{m:{g:e,p:i,O:o},D:u}=this,l='//div[@id="title"]/h1/yt-formatted-string[text()]';if(!o)return!1;const s=e.createElement("span",{innerText:"🔍",title:"Search by this video's title",style:"cursor: grab;",id:n.jt,onclick(){var t;i.navigate(`https://youtube.com/results?search_query=${encodeURIComponent(e.evaluate(l,null!==(t=document.body)&&void 0!==t?t:document,null,XPathResult.ANY_UNORDERED_NODE_TYPE,null).singleNodeValue.textContent)}`)}});return o.yt({wt:l,Mt:null!==(t=document.body)&&void 0!==t?t:document,_t(t){try{return!!t.singleNodeValue}catch(t){return!1}},resultType:XPathResult.ANY_UNORDERED_NODE_TYPE},(function(t){u.print(t.singleNodeValue),t.singleNodeValue.parentElement.append(s)})),!0},e.st=function(){for(let t of Object.values(n))this.m.g.gt(t);return!1}},996:function(t,e,n){var i=this&&this.k||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.t:o.writable||o.H)||(o={I:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.B||(Object.create?function(t,e){Object.defineProperty(t,"default",{I:!0,value:e})}:function(t,e){t.default=e}),u=this&&this.X||function(t){if(t&&t.t)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},l=this&&this.v||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(e,"t",{value:!0}),e.q=void 0;const s=n(235),r=l(n(355)),c=u(n(949)),a=u(n(633));class h{constructor(t){var e,n;this.F={},this.G={},this.K=function(){return!0},this.tt=null,this.D=r.default.C,this.m={p:c,g:a},this.state=new Map,this.isActive=!1,(0,s.Tt)({source:this}),t.K&&(this.K=t.K.bind(this)),(0,s.Tt)({source:null!==(e=t.F)&&void 0!==e?e:{},Lt:this.F,St:this}),(0,s.Tt)({source:null!==(n=t.G)&&void 0!==n?n:{},Lt:this.G,St:this}),t.D&&(this.D=t.D),t.tt&&(this.tt=t.tt),t.m&&Object.assign(this.m,t.m)}Nt(t,e){var n;return null!==(n=this.state.get(t))&&void 0!==n?n:e}$t(t,e){this.state.set(t,e)}Ut(t){this.state.delete(t)}}e.q=h,e.default=h},127:function(t,e,n){var i=this&&this.k||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.t:o.writable||o.H)||(o={I:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.B||(Object.create?function(t,e){Object.defineProperty(t,"default",{I:!0,value:e})}:function(t,e){t.default=e}),u=this&&this.X||function(t){if(t&&t.t)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},l=this&&this.v||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(e,"t",{value:!0}),e.T=e.q=void 0;var s=n(996);Object.defineProperty(e,"q",{I:!0,get:function(){return l(s).default}}),e.T=u(n(997))},997:function(t,e,n){var i=this&&this.v||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(e,"t",{value:!0}),e.Z=e.A=e.$=e._=void 0;const o=i(n(355));e._=function(t){var e,n,i;let u,l=null!==(e=t.D)&&void 0!==e?e:o.default.C;for(let e of t.L)try{t.N&&e.isActive===e.K(null!==(n=t.P)&&void 0!==n?n:e.m.p.U())||(u=null===(i=e.F[t.S])||void 0===i?void 0:i.call(e),"boolean"==typeof u&&u!==e.isActive&&(e.isActive=u,l.print(`${u?"Started":"Stopped"} module: "${e.tt}"`)))}catch(t){l.error(t,e)}},e.$=function(t){var e,n,i,u;let l=null!==(e=t.D)&&void 0!==e?e:o.default.C;for(let e of t.L)try{t.N&&!e.K(null!==(n=t.P)&&void 0!==n?n:e.m.p.U())||null===(u=null===(i=e.G)||void 0===i?void 0:i[t.methodName])||void 0===u||u.call(e,...t.methodArgs)}catch(n){l.error({error:n,module:e,methodName:t.methodName,methodArgs:t.methodArgs})}},e.A=function(t){var e,n;let i=null!==(e=t.D)&&void 0!==e?e:o.default.C;for(let e of t.L)try{e.K(null!==(n=t.P)&&void 0!==n?n:e.m.p.U())?!e.isActive&&e.F.V&&(e.isActive=e.F.V.call(e),i.print(`Started module: "${e.tt}"`)):e.isActive&&e.F.it&&(e.isActive=e.F.it.call(e),i.print(`Stopped module: "${e.tt}"`))}catch(t){i.error(t,e)}},e.Z=function(t,e=!1){const n="string"==typeof t?new RegExp(t):t;return function(t){const i=t?"string"==typeof t?new URL(t):t:this.m.p.U();return n.test(e?i.href:i.pathname)}}},227:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.xt=void 0,e.xt=function(t){let e=t,n=Math.floor(e/3600);e%=3600;let i=Math.floor(e/60);return e=Math.round(e%60),[n.toString().padStart(2,"0"),i.toString().padStart(2,"0"),e.toString().padStart(2,"0")].join(":")}},355:(t,e,n)=>{Object.defineProperty(e,"t",{value:!0});const i=n(235),o=n(633);class u{constructor(t=u.Ct){var e;this.Rt=!1;const n=Object.assign(Object.assign({},u.Ct),t);(0,i.Tt)({source:this}),this.At=n.name,this.Dt=n.Dt,this.Pt=n.Pt,this.Rt=null!==(e=n.Rt)&&void 0!==e&&e}kt(){switch(this.Pt){case"UTC":return(new Date).toUTCString();case"ISO":return(new Date).toISOString();case"Locale":return(new Date).toLocaleString();case"Milliseconds":return(new Date).getTime().toString();default:return(new Date).toString()}}Ht(t=!1,e=!1){return[t&&this.kt(),this.Rt&&u.It,this.At].reduce((function(t,e){return e&&t.push(`[${e}]`),t}),[]).join(" ")+":"+(e?" ":"")}print(...t){console.log(this.Ht(this.Dt,!1),...t)}error(...t){console.error(this.Ht(this.Dt,!1),...t)}}u.It="iframe",u.Ct={name:globalThis.GM_info?`${globalThis.GM_info.script.name} v${globalThis.GM_info.script.version}`:"",Dt:!0,Pt:"Locale",Rt:(0,o.Bt)()},u.C=new u,e.default=u},235:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.Tt=void 0,e.Tt=function(t){var e,n;const i=null!==(e=t.St)&&void 0!==e?e:t.source,o=t.Xt?{}:null!==(n=t.Lt)&&void 0!==n?n:t.source,u=t.source.constructor===Object?Object.keys(t.source):Object.getOwnPropertyNames(Object.getPrototypeOf(t.source));for(let e of u)"constructor"!==e&&"function"==typeof t.source[e]?o[e]=t.source[e].bind(i):o[e]=t.source[e];return o}},633:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.Bt=e.isVisible=e.createElement=e.gt=e.ft=e.evaluate=e.qt=e.vt=void 0,e.vt=function(t){return document.querySelector(t)},e.qt=function(t){return document.querySelectorAll(t)},e.evaluate=function(t,e,n,i,o){return document.evaluate(t,e,n,i,o)},e.ft=function(t=document.location){const e=new Map;let n;for(let i of(t.search.startsWith("?")?t.search.substring(1):t.search).split("&"))n=i.indexOf("="),e.set(i.substring(0,n),i.substring(n+1));return e},e.gt=function(t){var e,n;t&&(null===(n=null===(e=document.getElementById(t))||void 0===e?void 0:e.remove)||void 0===n||n.call(e))},e.createElement=function(t,e={},n){const i=Object.assign(document.createElement(t),e);return n&&i.append(...n),i},e.isVisible=function(t){let e=globalThis.getComputedStyle(t);return"none"!==e.display&&"hidden"!==e.visibility},e.Bt=function(){return globalThis.self!==globalThis.top}},795:function(t,e,n){var i=this&&this.v||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(e,"t",{value:!0});const o=n(235),u=i(n(355)),l=n(949),s=n(997);class r{constructor(t=r.Ft){this.Vt=!1,this.Wt=s.A,this.U=l.U,(0,o.Tt)({source:this});const e=Object.assign(Object.assign({},r.Ft),t);this.Et="",this.Qt=new e.Yt(this.A),this.D=e.D,this.L=e.L,this.Vt=e.Vt,this.Wt=e.A.bind(this),this.U=e.U.bind(this)}A(){let t=this.U(),e=this.Vt?t.href:t.pathname;this.Et!==e&&(this.Et=e,this.D.print("Changed url!",`New ${this.Vt?"url":"pathname"}: "${e}"`),this.Wt({L:this.L,P:this.U(),D:this.D}))}start(){this.Qt.observe(document,{subtree:!0,childList:!0,attributeFilter:["location"]})}stop(){this.Qt.disconnect()}}r.Ft={L:[],D:u.default.C,Vt:!1,A:s.A,Yt:MutationObserver,U:l.U},e.default=r},491:function(t,e,n){var i,o=this&&this.k||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.t:o.writable||o.H)||(o={I:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.B||(Object.create?function(t,e){Object.defineProperty(t,"default",{I:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.X||function(t){if(t&&t.t)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return u(e,t),e};Object.defineProperty(e,"t",{value:!0});const s=l(n(633)),r=n(235);class c{constructor(t=c.zt){var e;this.Gt=[],this.target=null!==(e=document.body)&&void 0!==e?e:document;const n=Object.assign(Object.assign({},c.zt),t);(0,r.Tt)({source:this}),this.g=n.g,this.Qt=new n.Yt(this.Jt),this.target=n.target,this.Gt=[],n.h&&this.start()}Jt(){var t,e,n,i,o,u;const l=[];let s;for(let r of this.Gt)s=r.query?this.g.qt(r.query):r.wt?this.g.evaluate(r.wt.wt,null!==(t=r.wt.Mt)&&void 0!==t?t:document.body,null!==(e=r.wt.Kt)&&void 0!==e?e:null,null!==(n=r.wt.resultType)&&void 0!==n?n:XPathResult.ANY_TYPE,null!==(i=r.wt.result)&&void 0!==i?i:null):null,s instanceof NodeList&&s.length>0||s instanceof XPathResult&&(null===(u=(o=r.wt)._t)||void 0===u?void 0:u.call(o,s))?r.Zt(s):l.push(r);this.Gt=l}rt(t,e){if(!t)return;const n=this.g.qt(t);if(n.length>0)return e(n);this.Gt.push({query:t,Zt:e})}yt(t,e){var n,i,o,u,l,s;if(!(null==t?void 0:t.wt))return;const r=this.g.evaluate(t.wt,null!==(i=null!==(n=t.Mt)&&void 0!==n?n:document.body)&&void 0!==i?i:document,null!==(o=t.Kt)&&void 0!==o?o:null,null!==(u=t.resultType)&&void 0!==u?u:XPathResult.ANY_TYPE,null!==(l=t.result)&&void 0!==l?l:null);if(null===(s=t._t)||void 0===s?void 0:s.call(t,r))return e(r);this.Gt.push({wt:t,Zt:e})}start(){this.Qt.observe(this.target,{subtree:!0,childList:!0})}stop(){this.Qt.disconnect()}}c.zt={Yt:MutationObserver,g:s,target:null!==(i=document.body)&&void 0!==i?i:document,h:!1},e.default=c},949:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.U=e.bt=e.Ot=e.navigate=void 0,e.navigate=function(t){document.location.assign(t.toString())},e.Ot=function(t,e){document.location[t]=e},e.bt=function(t){globalThis.GM_openInTab?globalThis.GM_openInTab(t.toString()):globalThis.open(t.toString(),"_blank")},e.U=function(){return document.location}},583:function(t,e,n){var i=this&&this.k||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.t:o.writable||o.H)||(o={I:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.B||(Object.create?function(t,e){Object.defineProperty(t,"default",{I:!0,value:e})}:function(t,e){t.default=e}),u=this&&this.X||function(t){if(t&&t.t)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},l=this&&this.v||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(e,"t",{value:!0}),e.l=e.te=e.R=e.M=e.j=e.ee=e.ne=void 0,e.ne=u(n(235)),e.ee=u(n(227)),e.j=u(n(633)),e.M=u(n(949));var s=n(355);Object.defineProperty(e,"R",{I:!0,get:function(){return l(s).default}});var r=n(795);Object.defineProperty(e,"te",{I:!0,get:function(){return l(r).default}});var c=n(491);Object.defineProperty(e,"l",{I:!0,get:function(){return l(c).default}})}},e={};(function n(i){var o=e[i];if(void 0!==o)return o.exports;var u=e[i]={exports:{}};return t[i].call(u.exports,u,u.exports,n),u.exports})(607)})();