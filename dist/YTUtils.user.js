// ==UserScript==
// @name        YT Utils
// @namespace   Violentmonkey Scripts
// @match       https://www.youtube.com/**
// @grant       GM_info
// @grant       GM_openInTab
// @version     1.6.6
// @author      -
// @inject-into page
// @run-at      document-start
// @description Useful YouTube utilities.
// @homepageURL https://github.com/IProgramWell/YTUtils
// @downloadURL https://raw.githubusercontent.com/IProgramWell/YTUtils/master/dist/YTUtils.user.js
// ==/UserScript==
(()=>{"use strict";var t={913:(t,e,n)=>{var i;Object.defineProperty(e,"t",{value:!0}),e.i=e.o=e.u=void 0;const o=n(583);e.u=new o.l({h:!0,target:null!==(i=document.body)&&void 0!==i?i:document}),e.o=["yt-navigate-start"],e.i={"ytutils-no-pl-btn":"{\n\tfloat: left;\n\ttop: 50%;\n\twhite-space: nowrap;\n}"}},607:function(t,e,n){var i=this&&this.v||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(e,"t",{value:!0});const o=n(127),s=n(583),r=i(n(815)),u=n(913);!function(){const t=(0,r.default)({m:{g:u.u,O:s.j,p:s._,M:s.T,S:globalThis}});o.$.L({A:t}),o.$.N({A:t,U:"onDocumentStart",I:!0});for(let e of u.o)globalThis.document.addEventListener(e,(function(n){o.$.C({A:t,methodName:e,methodArgs:[n],I:!0})}));globalThis.addEventListener("load",(function(){globalThis.document.head.appendChild(s.j.createElement("style",{innerHTML:Object.entries(u.i).map((([t,e])=>`.${t} ${e}`)).join("\n").trim(),id:"ytutils-styles"})),o.$.N({A:t,U:"onDocumentLoad"})})),globalThis.addEventListener("yt-navigate-finish",(function(){const e=s._.k();s.H.D.print(`Changed url! New url: "${e.href}"`),o.$.R({A:t,B:s.H.D,q:e})}))}()},815:function(t,e,n){var i=this&&this.P||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.t:o.writable||o.F)||(o={V:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.W||(Object.create?function(t,e){Object.defineProperty(t,"default",{V:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.J||function(t){if(t&&t.t)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e};Object.defineProperty(e,"t",{value:!0});const r=n(127),u=s(n(566)),l=s(n(105)),c=s(n(138)),a=s(n(257));e.default=function(t){return[new r.Y({G:{K:u.X,Z:u.X},tt:{"yt-navigate-start":u.et},nt:r.$.it(/^\/shorts\/.+$/i),m:t.m,ot:"No Shorts Redirector"}),new r.Y({G:{st:l.rt,K:l.rt,ut:l.lt},nt:l.ct,m:t.m,ot:"No Playlist Controls"}),new r.Y({G:{K:c.ht,ut:c.dt},nt:r.$.it(/^\/watch\/?$/),ot:"Search by title",m:t.m}),new r.Y({G:a,nt:r.$.it(/^\/(results|watch)?\/?$/),ot:"No (more) banner ads",m:t.m})]}},257:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.K=void 0,e.K=function(){let{g:t}=this.m;return!!t&&(t.ft("div#masthead-ad",(function(t){for(let e of Array.from(t))e.parentElement.removeChild(e)})),t.ft("ytd-in-feed-ad-layout-renderer",(function(t){for(let e of Array.from(t))e.parentElement.parentElement.parentElement.remove()})),t.ft("ytd-ad-slot-renderer",(function(t){for(let e of Array.from(t))e.parentElement.removeChild(e)})),!0)}},105:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.ct=e.lt=e.rt=void 0;const n={vt:"ytutils-noplaylist-newtabcheckbox",bt:"ytutils-noplaylist-newtabcheckbox-label",gt:"ytutils-noplaylist-noplbtn"};e.rt=function(){const{p:t,O:e}=this.m,i=e.Ot(".ytp-right-controls");if(!i)return!1;const o=e.createElement("input",{type:"checkbox",id:n.vt,style:"transform: translateY(50%)",className:"ytutils-no-pl-btn",name:n.vt,title:"Open in new tab",checked:!0}),s=e.createElement("label",{htmlFor:n.vt,innerHTML:"New tab?",className:"ytutils-no-pl-btn",id:n.bt}),r=e.createElement("button",{id:n.gt,title:"Watch outside playlist",onclick(){var i;let o=e.jt();(null===(i=e.Ot(`#${n.vt}`))||void 0===i?void 0:i.checked)?t.yt(`https://youtube.com/watch?v=${o.get("v")}`):t.wt("search",`?v=${o.get("v")}`)},innerHTML:"No Playlist",className:"ytutils-no-pl-btn"});return i.prepend(o,s,r),!0},e.lt=function(){for(let t of Object.values(n))this.m.O._t(t);return!1},e.ct=function(t){const e=t?"string"==typeof t?new URL(t):t:this.m.p.k();return/\/watch\/?/i.test(e.pathname)&&!!this.m.O.jt(e).get("list")}},566:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.et=e.X=void 0,e.X=function(){const[t,e,n]=this.m.p.k().pathname.split("/");return"shorts"===e&&this.m.p.navigate(`https://youtube.com/watch?v=${n}`),!0},e.et=function(t){"shorts"===t.detail.pageType&&this.m.p.navigate(`https://youtube.com/watch?v=${this.m.p.k().pathname.split("/")[2]}`)}},138:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.dt=e.ht=void 0;const n={Mt:"ytutils-searchbytitle-searchbtn"},i="div#title yt-formatted-string";e.ht=function(){const{m:{O:t,p:e,g:o},B:s}=this;if(!o)return!1;const r=t.createElement("span",{innerText:"🔍",title:"Search by this video's title",style:"cursor: grab;",id:n.Mt,onclick(){var n;let o=null===(n=t.Ot(i))||void 0===n?void 0:n.textContent;o&&e.navigate(`https://youtube.com/results?search_query=${encodeURIComponent(o)}`)}});return o.ft(i,(function(t){let e=t[0];s.print(e),e.parentElement.appendChild(r)})),!0},e.dt=function(){for(let t of Object.values(n))this.m.O._t(t);return!1}},996:(t,e,n)=>{Object.defineProperty(e,"t",{value:!0}),e.Y=void 0;const i=n(583);class o{constructor(t){var e,n;this.G={},this.tt={},this.nt=function(){return!0},this.ot=null,this.B=i.H.D,this.m={p:i._,O:i.j,M:i.T},this.state=new Map,this.isActive=!1,i.St.Tt({source:this}),t.nt&&(this.nt=t.nt.bind(this)),i.St.Tt({source:null!==(e=t.G)&&void 0!==e?e:{},Lt:this.G,$t:this}),i.St.Tt({source:null!==(n=t.tt)&&void 0!==n?n:{},Lt:this.tt,$t:this}),t.B&&(this.B=t.B),t.ot&&(this.ot=t.ot),t.m&&Object.assign(this.m,t.m)}At(t,e){var n;return null!==(n=this.state.get(t))&&void 0!==n?n:e}Nt(t,e){this.state.set(t,e)}Ut(t){this.state.delete(t)}}e.Y=o,e.default=o},127:function(t,e,n){var i=this&&this.P||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.t:o.writable||o.F)||(o={V:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.W||(Object.create?function(t,e){Object.defineProperty(t,"default",{V:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.J||function(t){if(t&&t.t)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},r=this&&this.v||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(e,"t",{value:!0}),e.$=e.Y=void 0;var u=n(996);Object.defineProperty(e,"Y",{V:!0,get:function(){return r(u).default}}),e.$=s(n(997))},997:function(t,e,n){var i=this&&this.v||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(e,"t",{value:!0}),e.it=e.R=e.C=e.N=e.L=void 0;const o=i(n(355));e.L=function(t){var e;for(let n of t.A)null===(e=n.G.init)||void 0===e||e.call(n)},e.N=function(t){var e,n,i;let s,r=null!==(e=t.B)&&void 0!==e?e:o.default.D;for(let e of t.A)try{t.I&&e.isActive===e.nt(null!==(n=t.q)&&void 0!==n?n:e.m.p.k())||(s=null===(i=e.G[t.U])||void 0===i?void 0:i.call(e),"boolean"==typeof s&&s!==e.isActive&&(e.isActive=s,r.print(`${s?"Started":"Stopped"} module: "${e.ot}"`)))}catch(t){r.error(t,e)}},e.C=function(t){var e,n,i,s;let r=null!==(e=t.B)&&void 0!==e?e:o.default.D;for(let e of t.A)try{t.I&&!e.nt(null!==(n=t.q)&&void 0!==n?n:e.m.p.k())||null===(s=null===(i=e.tt)||void 0===i?void 0:i[t.methodName])||void 0===s||s.call(e,...t.methodArgs)}catch(n){r.error({error:n,module:e,methodName:t.methodName,methodArgs:t.methodArgs})}},e.R=function(t){var e,n;let i=null!==(e=t.B)&&void 0!==e?e:o.default.D;for(let e of t.A)try{e.nt(null!==(n=t.q)&&void 0!==n?n:e.m.p.k())?!e.isActive&&e.G.K&&(e.isActive=e.G.K.call(e),i.print(`Started module: "${e.ot}"`)):e.isActive&&e.G.ut&&(e.isActive=e.G.ut.call(e),i.print(`Stopped module: "${e.ot}"`))}catch(t){i.error(t,e)}},e.it=function(t,e=!1){const n="string"==typeof t?new RegExp(t):t;return function(t){const i=t?"string"==typeof t?new URL(t):t:this.m.p.k();return n.test(e?i.href:i.pathname)}}},227:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.It=void 0,e.It=function(t){let e=t,n=Math.floor(e/3600);e%=3600;let i=Math.floor(e/60);return e=Math.round(e%60),[n.toString().padStart(2,"0"),i.toString().padStart(2,"0"),e.toString().padStart(2,"0")].join(":")}},355:(t,e,n)=>{Object.defineProperty(e,"t",{value:!0});const i=n(235),o=n(633);class s{constructor(t=s.xt){var e;this.Ct=!1;const n=Object.assign(Object.assign({},s.xt),t);(0,i.Tt)({source:this}),this.kt=n.name,this.Dt=n.Dt,this.Et=n.Et,this.Ct=null!==(e=n.Ct)&&void 0!==e&&e}Ht(){switch(this.Et){case"UTC":return(new Date).toUTCString();case"ISO":return(new Date).toISOString();case"Locale":return(new Date).toLocaleString();case"Milliseconds":return(new Date).getTime().toString();default:return(new Date).toString()}}Rt(t=!1,e=!1){return[t&&this.Ht(),this.Ct&&s.Bt,this.kt].reduce((function(t,e){return e&&t.push(`[${e}]`),t}),[]).join(" ")+":"+(e?" ":"")}print(...t){console.log(this.Rt(this.Dt,!1),...t)}error(...t){console.error(this.Rt(this.Dt,!1),...t)}}s.Bt="iframe",s.xt={name:globalThis.GM_info?`${globalThis.GM_info.script.name} v${globalThis.GM_info.script.version}`:"",Dt:!0,Et:"Locale",Ct:(0,o.qt)()},s.D=new s,e.default=s},235:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.Tt=void 0,e.Tt=function(t){var e,n;const i=null!==(e=t.$t)&&void 0!==e?e:t.source,o=t.Pt?{}:null!==(n=t.Lt)&&void 0!==n?n:t.source,s=t.source.constructor===Object?Object.keys(t.source):Object.getOwnPropertyNames(Object.getPrototypeOf(t.source));for(let e of s)"constructor"!==e&&"function"==typeof t.source[e]?o[e]=t.source[e].bind(i):o[e]=t.source[e];return o}},633:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.qt=e.isVisible=e.createElement=e._t=e.jt=e.evaluate=e.Ft=e.Ot=void 0,e.Ot=function(t){return document.querySelector(t)},e.Ft=function(t){return document.querySelectorAll(t)},e.evaluate=function(t,e,n,i,o){return document.evaluate(t,e,n,i,o)},e.jt=function(t=document.location){const e=new Map;let n;for(let i of(t.search.startsWith("?")?t.search.substring(1):t.search).split("&"))n=i.indexOf("="),e.set(i.substring(0,n),i.substring(n+1));return e},e._t=function(t){var e,n;t&&(null===(n=null===(e=document.getElementById(t))||void 0===e?void 0:e.remove)||void 0===n||n.call(e))},e.createElement=function(t,e={},n){const i=Object.assign(document.createElement(t),e);return n&&i.append(...n),i},e.isVisible=function(t){let e=globalThis.getComputedStyle(t);return"none"!==e.display&&"hidden"!==e.visibility},e.qt=function(){return globalThis.self!==globalThis.top}},795:function(t,e,n){var i=this&&this.v||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(e,"t",{value:!0});const o=n(235),s=i(n(355)),r=n(949),u=n(997);class l{constructor(t=l.Vt){this.Wt=!1,this.Qt=u.R,this.k=r.k,(0,o.Tt)({source:this});const e=Object.assign(Object.assign({},l.Vt),t);this.Jt="",this.Yt=new e.zt(this.R),this.B=e.B,this.A=e.A,this.Wt=e.Wt,this.Qt=e.R.bind(this),this.k=e.k.bind(this)}R(){let t=this.k(),e=this.Wt?t.href:t.pathname;this.Jt!==e&&(this.Jt=e,this.B.print("Changed url!",`New ${this.Wt?"url":"pathname"}: "${e}"`),this.Qt({A:this.A,q:this.k(),B:this.B}))}start(){this.Yt.observe(document,{subtree:!0,childList:!0,attributeFilter:["location"]})}stop(){this.Yt.disconnect()}}l.Vt={A:[],B:s.default.D,Wt:!1,R:u.R,zt:MutationObserver,k:r.k},e.default=l},491:function(t,e,n){var i,o=this&&this.P||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.t:o.writable||o.F)||(o={V:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.W||(Object.create?function(t,e){Object.defineProperty(t,"default",{V:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.J||function(t){if(t&&t.t)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return s(e,t),e};Object.defineProperty(e,"t",{value:!0});const u=r(n(633)),l=n(235);class c{constructor(t=c.Gt){var e;this.Kt=[],this.target=null!==(e=document.body)&&void 0!==e?e:document;const n=Object.assign(Object.assign({},c.Gt),t);(0,l.Tt)({source:this}),this.O=n.O,this.Yt=new n.zt(this.Xt),this.target=n.target,this.Kt=[],n.h&&this.start()}Xt(t){let e;for(let[n,i]of this.Kt.entries()){if(e=[],"string"==typeof i.query)for(let n of t)for(let t of Array.from(n.addedNodes))t instanceof Element&&t.matches(i.query)&&e.push(t);e.length>0&&i.Zt(e),this.Kt.splice(n,1)}}ft(t,e){if(!t)return;const n=Array.from(this.O.Ft(t));if(n.length>0)return e(n);this.Kt.push({query:t,Zt:e})}start(){this.Yt.observe(this.target,{subtree:!0,childList:!0})}stop(){this.Yt.disconnect()}}c.Gt={zt:MutationObserver,O:u,target:null!==(i=document.body)&&void 0!==i?i:document,h:!1},e.default=c},52:function(t,e,n){var i=this&&this.v||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(e,"t",{value:!0});const o=i(n(627));class s extends o.default{constructor(t,e,n){super(t,e,new Proxy(t[e],n)),this.items=[]}add(t){this.items.push(t)}remove(t){return this.items.splice(t,1)[0]}clear(){return this.items.splice(0,this.items.length)}item(t){return this.items[t]}getItems(){return this.items}te(){return 0===this.items.length}ee(){return this.items.length>0}*[Symbol.iterator](){for(let t=0;t<=this.items.length;t++)yield this.items[t]}}e.default=s},627:(t,e)=>{Object.defineProperty(e,"t",{value:!0});class n extends EventTarget{get ie(){return this.oe[this.key]===this.se}constructor(t,e,n){super(),this.oe=t,this.key=e,this.se=n,this.re=t[e]}ue(){if(this.ie)return!0;try{return this.dispatchEvent(new Event("beforeInstall")),this.oe[this.key]=this.se,this.dispatchEvent(new Event("installed")),!0}catch(t){return!1}}le(){if(!this.ie)return!0;try{return this.dispatchEvent(new Event("beforeUninstall")),this.oe[this.key]=this.re,this.dispatchEvent(new Event("uninstalled")),!0}catch(t){return!1}}}e.default=n},554:(t,e)=>{function n(t){return t.getAllResponseHeaders().split(new RegExp("\r?\n","g")).reduce((function(t,e){if(!e)return t;const n=e.indexOf(": "),[i,o]=n<0?[e.toLowerCase().trim(),""]:[e.substring(0,n).toLowerCase().trim(),e.substring(n+2).trim()],s=t.get(i);switch(typeof s){case"undefined":t.set(i,o);break;case"object":Array.isArray(s)&&s.push(o);break;case"string":t.set(i,[s,o])}return t}),new Map)}Object.defineProperty(e,"t",{value:!0}),e.ce=e.ae=void 0,e.ae=function(t){var e;const i=n(t),o=null!==(e=i.get("content-type"))&&void 0!==e?e:"";return{response:{body:(Array.isArray(o)?o.some((t=>t.toLowerCase().startsWith("application/json"))):o.toLowerCase().startsWith("application/json"))?JSON.parse(t.responseText):t.responseText,headers:i,status:t.status},url:t.responseURL}},e.ce=n},949:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.k=e.yt=e.wt=e.navigate=void 0,e.navigate=function(t){document.location.assign(t.toString())},e.wt=function(t,e){document.location[t]=e},e.yt=function(t){globalThis.GM_openInTab?globalThis.GM_openInTab(t.toString()):globalThis.open(t.toString(),"_blank")},e.k=function(){return document.location}},583:function(t,e,n){var i=this&&this.P||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.t:o.writable||o.F)||(o={V:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.W||(Object.create?function(t,e){Object.defineProperty(t,"default",{V:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.J||function(t){if(t&&t.t)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},r=this&&this.v||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(e,"t",{value:!0}),e.he=e.de=e.T=e.l=e.fe=e.H=e._=e.j=e.ve=e.St=void 0,e.St=s(n(235)),e.ve=s(n(227)),e.j=s(n(633)),e._=s(n(949));var u=n(355);Object.defineProperty(e,"H",{V:!0,get:function(){return r(u).default}});var l=n(795);Object.defineProperty(e,"fe",{V:!0,get:function(){return r(l).default}});var c=n(491);Object.defineProperty(e,"l",{V:!0,get:function(){return r(c).default}}),e.T=s(n(554));var a=n(627);Object.defineProperty(e,"de",{V:!0,get:function(){return r(a).default}});var h=n(52);Object.defineProperty(e,"he",{V:!0,get:function(){return r(h).default}})}},e={};(function n(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,n),s.exports})(607)})();