// ==UserScript==
// @name        YT Utils
// @namespace   Violentmonkey Scripts
// @match       https://www.youtube.com/**
// @grant       GM_openInTab
// @version     1.6.6
// @author      -
// @inject-into page
// @run-at      document-start
// @description Useful YouTube utilities.
// @homepageURL https://github.com/IProgramWell/YTUtils
// @downloadURL https://raw.githubusercontent.com/IProgramWell/YTUtils/master/dist/YTUtils.user.js
// ==/UserScript==
(()=>{"use strict";var t={913:(t,e,n)=>{var i;Object.defineProperty(e,"t",{value:!0}),e.i=void 0;const o=n(583);e.i=new o.o({u:!0,target:null!==(i=document.body)&&void 0!==i?i:document})},607:function(t,e,n){var i=this&&this.l||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(e,"t",{value:!0});const o=n(127),u=n(583),l=i(n(815)),s=n(913);!function(){const t=(0,l.default)({h:{v:s.i,m:u.O,j:u.g}});for(let e of["init","onDocumentStart"])o.M.p({_:t,T:e,L:!1});globalThis.addEventListener("load",(function(){globalThis.document.head.appendChild(u.O.createElement("style",{innerHTML:"\n\t.ytutils-no-pl-btn {\n\t\tfloat: left;\n\t\ttop: 50%;\n\t\twhite-space: nowrap;\n\t}\n\t".trim(),id:"ytutils-styles"})),o.M.p({_:t,T:"onDocumentLoad"})})),globalThis.addEventListener("yt-navigate-finish",(function(){const e=u.g.S();u.$.N.print(`Changed url! New url: "${e.href}"`),o.M.U({_:t,C:u.$.N,R:e})}))}()},815:function(t,e,n){var i=this&&this.D||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.t:o.writable||o.P)||(o={k:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.A||(Object.create?function(t,e){Object.defineProperty(t,"default",{k:!0,value:e})}:function(t,e){t.default=e}),u=this&&this.H||function(t){if(t&&t.t)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e};Object.defineProperty(e,"t",{value:!0});const l=n(127),s=u(n(566)),r=u(n(105)),c=u(n(138));e.default=function(t){return[new l.I({B:{X:s.q,F:s.q},V:l.M.W(/^\/shorts\/.+$/i),h:t.h,Y:"No Shorts Redirector"}),new l.I({B:{G:r.J,X:r.J,K:r.Z},V:r.tt,h:t.h,Y:"No Playlist Controls"}),new l.I({B:{X:c.et,K:c.nt},V:l.M.W(/^\/watch\/?$/),Y:"Search by title",h:t.h}),new l.I({B:{X(){var t;return!!(null===(t=null==this?void 0:this.h)||void 0===t?void 0:t.v)&&(this.h.v.it("div#masthead-ad",(function(t){for(let e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e])})),!0)}},h:t.h,V:l.M.W(/^\/?$/),Y:"No banner ad"})]}},105:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.tt=e.Z=e.J=void 0;const n={ot:"ytutils-noplaylist-newtabcheckbox",ut:"ytutils-noplaylist-newtabcheckbox-label",lt:"ytutils-noplaylist-noplbtn"};e.J=function(){const{j:t,m:e}=this.h,i=e.st(".ytp-right-controls");if(!i)return!1;const o=e.createElement("input",{type:"checkbox",id:n.ot,style:"transform: translateY(50%)",className:"ytutils-no-pl-btn",name:n.ot,title:"Open in new tab"}),u=e.createElement("label",{htmlFor:n.ot,innerHTML:"New tab?",className:"ytutils-no-pl-btn",id:n.ut}),l=e.createElement("button",{id:n.lt,title:"Watch outside playlist",onclick(){var i;let o=e.rt();(null===(i=e.st(`#${n.ot}`))||void 0===i?void 0:i.checked)?t.ct(`https://youtube.com/watch?v=${o.get("v")}`):t.ht("search",`?v=${o.get("v")}`)},innerHTML:"No Playlist",className:"ytutils-no-pl-btn"});return i.prepend(o,u,l),!0},e.Z=function(){for(let t of Object.values(n))this.h.m.dt(t);return!1},e.tt=function(t){const e=t?"string"==typeof t?new URL(t):t:this.h.j.S();return/\/watch\/?/i.test(e.pathname)&&!!this.h.m.rt(e).get("list")}},566:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.q=void 0,e.q=function(){const[t,e,n]=this.h.j.S().pathname.split("/");return"shorts"===e&&this.h.j.navigate(`https://youtube.com/watch?v=${n}`),!0}},138:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.nt=e.et=void 0;const n={vt:"ytutils-searchbytitle-searchbtn"};e.et=function(){var t;const{h:{m:e,j:i,v:o},C:u}=this,l='//div[@id="title"]/h1/yt-formatted-string[text()]';if(!o)return!1;const s=e.createElement("span",{innerText:"🔍",title:"Search by this video's title",style:"cursor: grab;",id:n.vt,onclick(){var t;i.navigate(`https://youtube.com/results?search_query=${encodeURIComponent(e.evaluate(l,null!==(t=document.body)&&void 0!==t?t:document,null,XPathResult.ANY_UNORDERED_NODE_TYPE,null).singleNodeValue.textContent)}`)}});return o.ft({bt:l,Ot:null!==(t=document.body)&&void 0!==t?t:document,jt(t){try{return!!t.singleNodeValue}catch(t){return!1}},resultType:XPathResult.ANY_UNORDERED_NODE_TYPE},(function(t){u.print(t.singleNodeValue),t.singleNodeValue.parentElement.append(s)})),!0},e.nt=function(){for(let t of Object.values(n))this.h.m.dt(t);return!1}},996:function(t,e,n){var i=this&&this.D||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.t:o.writable||o.P)||(o={k:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.A||(Object.create?function(t,e){Object.defineProperty(t,"default",{k:!0,value:e})}:function(t,e){t.default=e}),u=this&&this.H||function(t){if(t&&t.t)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},l=this&&this.l||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(e,"t",{value:!0}),e.I=void 0;const s=n(235),r=l(n(355)),c=u(n(949)),a=u(n(633));class h{constructor(t){var e,n;this.B={},this.gt={},this.V=function(){return!0},this.Y=null,this.C=r.default.N,this.h={j:c,m:a},this.state=new Map,this.isActive=!1,(0,s.yt)({source:this}),t.V&&(this.V=t.V.bind(this)),(0,s.yt)({source:null!==(e=t.B)&&void 0!==e?e:{},wt:this.B,Mt:this}),(0,s.yt)({source:null!==(n=t.gt)&&void 0!==n?n:{},wt:this.gt,Mt:this}),t.C&&(this.C=t.C),t.Y&&(this.Y=t.Y),t.h&&Object.assign(this.h,t.h)}_t(t,e){var n;return null!==(n=this.state.get(t))&&void 0!==n?n:e}Tt(t,e){this.state.set(t,e)}Lt(t){this.state.delete(t)}}e.I=h,e.default=h},127:function(t,e,n){var i=this&&this.D||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.t:o.writable||o.P)||(o={k:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.A||(Object.create?function(t,e){Object.defineProperty(t,"default",{k:!0,value:e})}:function(t,e){t.default=e}),u=this&&this.H||function(t){if(t&&t.t)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},l=this&&this.l||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(e,"t",{value:!0}),e.M=e.I=void 0;var s=n(996);Object.defineProperty(e,"I",{k:!0,get:function(){return l(s).default}}),e.M=u(n(997))},997:function(t,e,n){var i=this&&this.l||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(e,"t",{value:!0}),e.W=e.U=e.St=e.p=void 0;const o=i(n(355));e.p=function(t){var e,n,i;let u,l=null!==(e=t.C)&&void 0!==e?e:o.default.N;for(let e of t._)try{t.L&&e.isActive===e.V(null!==(n=t.R)&&void 0!==n?n:e.h.j.S())||(u=null===(i=e.B[t.T])||void 0===i?void 0:i.call(e),"boolean"==typeof u&&u!==e.isActive&&(e.isActive=u,l.print(`${u?"Started":"Stopped"} module: "${e.Y}"`)))}catch(t){l.error(t,e)}},e.St=function(t){var e,n,i,u;let l=null!==(e=t.C)&&void 0!==e?e:o.default.N;for(let e of t._)try{t.L&&!e.V(null!==(n=t.R)&&void 0!==n?n:e.h.j.S())||null===(u=null===(i=e.gt)||void 0===i?void 0:i[t.methodName])||void 0===u||u.call(e,...t.Nt)}catch(n){l.error({$t:n,Ut:e,methodName:t.methodName,Nt:t.Nt})}},e.U=function(t){var e,n;let i=null!==(e=t.C)&&void 0!==e?e:o.default.N;for(let e of t._)try{e.V(null!==(n=t.R)&&void 0!==n?n:e.h.j.S())?!e.isActive&&e.B.X&&(e.isActive=e.B.X.call(e),i.print(`Started module: "${e.Y}"`)):e.isActive&&e.B.K&&(e.isActive=e.B.K.call(e),i.print(`Stopped module: "${e.Y}"`))}catch(t){i.error(t,e)}},e.W=function(t,e=!1){const n="string"==typeof t?new RegExp(t):t;return function(t){const i=t?"string"==typeof t?new URL(t):t:this.h.j.S();return n.test(e?i.href:i.pathname)}}},227:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.xt=void 0,e.xt=function(t){let e=t,n=Math.floor(e/3600);e%=3600;let i=Math.floor(e/60);return e=Math.round(e%60),[n.toString().padStart(2,"0"),i.toString().padStart(2,"0"),e.toString().padStart(2,"0")].join(":")}},355:(t,e,n)=>{Object.defineProperty(e,"t",{value:!0});const i=n(235),o=n(633);class u{constructor(t=u.Ct){var e;this.Rt=!1;const n=Object.assign(Object.assign({},u.Ct),t);(0,i.yt)({source:this}),this.Dt=n.name,this.Pt=n.Pt,this.kt=n.kt,this.Rt=null!==(e=n.Rt)&&void 0!==e&&e}At(){switch(this.kt){case"UTC":return(new Date).toUTCString();case"ISO":return(new Date).toISOString();case"Locale":return(new Date).toLocaleString();case"Milliseconds":return(new Date).getTime().toString();default:return(new Date).toString()}}Ht(t=!1,e=!1){return[t&&this.At(),this.Rt&&u.It,this.Dt].reduce((function(t,e){return e&&t.push(`[${e}]`),t}),[]).join(" ")+":"+(e?" ":"")}print(...t){console.log(this.Ht(this.Pt,!1),...t)}error(...t){console.error(this.Ht(this.Pt,!1),...t)}}u.It="iframe",u.Ct={name:globalThis.GM_info?`${globalThis.GM_info.script.name} v${globalThis.GM_info.script.version}`:"",Pt:!0,kt:"Locale",Rt:(0,o.Bt)()},u.N=new u,e.default=u},235:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.yt=void 0,e.yt=function(t){var e,n;const i=null!==(e=t.Mt)&&void 0!==e?e:t.source,o=t.Xt?{}:null!==(n=t.wt)&&void 0!==n?n:t.source,u=t.source.constructor===Object?Object.keys(t.source):Object.getOwnPropertyNames(Object.getPrototypeOf(t.source));for(let e of u)"constructor"!==e&&"function"==typeof t.source[e]?o[e]=t.source[e].bind(i):o[e]=t.source[e];return o}},633:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.Bt=e.isVisible=e.createElement=e.dt=e.rt=e.evaluate=e.qt=e.st=void 0,e.st=function(t){return document.querySelector(t)},e.qt=function(t){return document.querySelectorAll(t)},e.evaluate=function(t,e,n,i,o){return document.evaluate(t,e,n,i,o)},e.rt=function(t=document.location){const e=new Map;let n;for(let i of(t.search.startsWith("?")?t.search.substring(1):t.search).split("&"))n=i.indexOf("="),e.set(i.substring(0,n),i.substring(n+1));return e},e.dt=function(t){var e,n;t&&(null===(n=null===(e=document.getElementById(t))||void 0===e?void 0:e.remove)||void 0===n||n.call(e))},e.createElement=function(t,e={},n){const i=Object.assign(document.createElement(t),e);return n&&i.append(...n),i},e.isVisible=function(t){let e=globalThis.getComputedStyle(t);return"none"!==e.display&&"hidden"!==e.visibility},e.Bt=function(){return globalThis.self!==globalThis.top}},795:function(t,e,n){var i=this&&this.l||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(e,"t",{value:!0});const o=n(235),u=i(n(355)),l=n(949),s=n(997);class r{constructor(t=r.Ft){this.Vt=!1,this.Wt=s.U,this.S=l.S,(0,o.yt)({source:this});const e=Object.assign(Object.assign({},r.Ft),t);this.Et="",this.Qt=new e.Yt(this.U),this.C=e.C,this._=e._,this.Vt=e.Vt,this.Wt=e.U.bind(this),this.S=e.S.bind(this)}U(){let t=this.S(),e=this.Vt?t.href:t.pathname;this.Et!==e&&(this.Et=e,this.C.print("Changed url!",`New ${this.Vt?"url":"pathname"}: "${e}"`),this.Wt({_:this._,R:this.S(),C:this.C}))}start(){this.Qt.observe(document,{subtree:!0,childList:!0,attributeFilter:["location"]})}stop(){this.Qt.disconnect()}}r.Ft={_:[],C:u.default.N,Vt:!1,U:s.U,Yt:MutationObserver,S:l.S},e.default=r},491:function(t,e,n){var i,o=this&&this.D||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.t:o.writable||o.P)||(o={k:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),u=this&&this.A||(Object.create?function(t,e){Object.defineProperty(t,"default",{k:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.H||function(t){if(t&&t.t)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return u(e,t),e};Object.defineProperty(e,"t",{value:!0});const s=l(n(633)),r=n(235);class c{constructor(t=c.zt){var e;this.Gt=[],this.target=null!==(e=document.body)&&void 0!==e?e:document;const n=Object.assign(Object.assign({},c.zt),t);(0,r.yt)({source:this}),this.m=n.m,this.Qt=new n.Yt(this.Jt),this.target=n.target,this.Gt=[],n.u&&this.start()}Jt(){var t,e,n,i,o,u;const l=[];let s;for(let r of this.Gt)s=r.query?this.m.qt(r.query):r.bt?this.m.evaluate(r.bt.bt,null!==(t=r.bt.Ot)&&void 0!==t?t:document.body,null!==(e=r.bt.Kt)&&void 0!==e?e:null,null!==(n=r.bt.resultType)&&void 0!==n?n:XPathResult.ANY_TYPE,null!==(i=r.bt.result)&&void 0!==i?i:null):null,s instanceof NodeList&&s.length>0||s instanceof XPathResult&&(null===(u=(o=r.bt).jt)||void 0===u?void 0:u.call(o,s))?r.Zt(s):l.push(r);this.Gt=l}it(t,e){if(!t)return;const n=this.m.qt(t);if(n.length>0)return e(n);this.Gt.push({query:t,Zt:e})}ft(t,e){var n,i,o,u,l,s;if(!(null==t?void 0:t.bt))return;const r=this.m.evaluate(t.bt,null!==(i=null!==(n=t.Ot)&&void 0!==n?n:document.body)&&void 0!==i?i:document,null!==(o=t.Kt)&&void 0!==o?o:null,null!==(u=t.resultType)&&void 0!==u?u:XPathResult.ANY_TYPE,null!==(l=t.result)&&void 0!==l?l:null);if(null===(s=t.jt)||void 0===s?void 0:s.call(t,r))return e(r);this.Gt.push({bt:t,Zt:e})}start(){this.Qt.observe(this.target,{subtree:!0,childList:!0})}stop(){this.Qt.disconnect()}}c.zt={Yt:MutationObserver,m:s,target:null!==(i=document.body)&&void 0!==i?i:document,u:!1},e.default=c},949:(t,e)=>{Object.defineProperty(e,"t",{value:!0}),e.S=e.ct=e.ht=e.navigate=void 0,e.navigate=function(t){document.location.assign(t.toString())},e.ht=function(t,e){document.location[t]=e},e.ct=function(t){globalThis.GM_openInTab?globalThis.GM_openInTab(t.toString()):globalThis.open(t.toString(),"_blank")},e.S=function(){return document.location}},583:function(t,e,n){var i=this&&this.D||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.t:o.writable||o.P)||(o={k:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.A||(Object.create?function(t,e){Object.defineProperty(t,"default",{k:!0,value:e})}:function(t,e){t.default=e}),u=this&&this.H||function(t){if(t&&t.t)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},l=this&&this.l||function(t){return t&&t.t?t:{default:t}};Object.defineProperty(e,"t",{value:!0}),e.o=e.te=e.$=e.g=e.O=e.ee=e.ne=void 0,e.ne=u(n(235)),e.ee=u(n(227)),e.O=u(n(633)),e.g=u(n(949));var s=n(355);Object.defineProperty(e,"$",{k:!0,get:function(){return l(s).default}});var r=n(795);Object.defineProperty(e,"te",{k:!0,get:function(){return l(r).default}});var c=n(491);Object.defineProperty(e,"o",{k:!0,get:function(){return l(c).default}})}},e={};(function n(i){var o=e[i];if(void 0!==o)return o.exports;var u=e[i]={exports:{}};return t[i].call(u.exports,u,u.exports,n),u.exports})(607)})();